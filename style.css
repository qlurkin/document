@page {
  size: A4;
}

@page :left {
  margin-left: 3cm;

  @bottom-left {
    content: counter(page);
  }
}

@page :right {
  margin-left: 4cm;

  @bottom-right {
    content: counter(page);
  }

  @bottom-left {
    margin: 10pt 0 30pt 0;
    border-top: .25pt solid #666;
    content: "My book";
    font-size: 9pt;
    color: #333;
  }

  @top-right {
    content: string(doctitle);
    margin: 30pt 0 10pt 0;
    font-size: 8pt;
  }
}

h1 {
  page-break-before: always;
  counter-reset: figurenum footnote;
  string-set: doctitle content();
}

h1, h2, h3, h4, h5 {
  page-break-after: avoid;
}

table, figure {
  page-break-inside: avoid;
}

body {
  counter-reset: chapternum figurenum;
}

h1.chapter:before {
  counter-increment: chapternum;
  content: counter(chapternum) ". ";
}

figcaption:before {
  counter-increment: figurenum;
  content: counter(chapternum) "-" counter(figurenum) ". ";
}

.footnotes {
  float: footnote;
  counter-increment: footnote;
}

.footnotes::footnote-call {
  content: counter(footnote);
  font-size: 9pt;
  vertical-align: super;
  line-height: none;
}

.footnotes::footnote-marker {
  font-weight: bold;
}

@page {
  @footnote {
    border-top: 1pt solid black;
  }
}

a.xref:after {
  content: " (page " target-counter(attr(href, url), page) ")";
}
